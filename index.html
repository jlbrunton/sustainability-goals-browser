<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UK&I Structural Sustainability Goals Browser</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: white;
            min-height: 100vh;
            color: #000000;
            line-height: 1.6;
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 53, 62, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal {
            background: white;
            border-radius: 0;
            padding: 36pt;
            max-width: 500px;
            width: 90%;
            border-top: 4pt solid #008768;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .modal h2 {
            font-size: 21pt;
            line-height: 24pt;
            font-weight: bold;
            color: #000000;
            margin-bottom: 18pt;
            text-align: center;
        }

        .modal p {
            font-size: 9pt;
            line-height: 12pt;
            color: #000000;
            margin-bottom: 24pt;
            text-align: center;
        }

        .modal-dropdown {
            width: 100%;
            padding: 12pt;
            border: 2pt solid #008768;
            background: white;
            color: #000000;
            font-size: 12pt;
            line-height: 15pt;
            font-weight: bold;
            cursor: pointer;
            margin-bottom: 24pt;
        }

        .modal-dropdown:focus {
            outline: 2pt solid #008768;
            outline-offset: 2pt;
        }

        .modal-btn {
            width: 100%;
            padding: 12pt 24pt;
            background: #008768;
            color: white;
            border: none;
            font-size: 12pt;
            line-height: 15pt;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .modal-btn:hover {
            background: #00353e;
        }

        .modal-btn:disabled {
            background: #d0d0d0;
            cursor: not-allowed;
        }

        /* Grid System */
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 24pt;
        }

        /* Typography */
        .heading-05 {
            font-size: 21pt;
            line-height: 24pt;
            font-weight: bold;
            color: #000000;
            margin-bottom: 15pt;
        }

        .hidden {
            display: none;
        }

        /* Filter section */
        .filters {
            background: #f6f6f6;
            padding: 24pt;
            margin-bottom: 24pt;
        }

        .filters-row {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 24pt;
            align-items: start;
        }

        .filter-group {
            margin-bottom: 0;
        }

        .filter-label {
            font-size: 12pt;
            line-height: 15pt;
            font-weight: bold;
            color: #000000;
            margin-bottom: 9pt;
            display: block;
        }

        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 6pt;
        }

        .filter-btn {
            padding: 6pt 12pt;
            border: 1pt solid #008768;
            background: white;
            color: #008768;
            font-size: 9pt;
            line-height: 12pt;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: none;
        }

        .filter-btn:hover {
            background: rgba(0, 135, 104, 0.1);
        }

        .filter-btn.active {
            background: #008768;
            color: white;
        }

        .role-dropdown {
            width: 100%;
            padding: 9pt 12pt;
            border: 1pt solid #008768;
            background: white;
            color: #000000;
            font-size: 9pt;
            line-height: 12pt;
            font-weight: normal;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .role-dropdown:hover {
            background: rgba(0, 135, 104, 0.05);
        }

        .role-dropdown:focus {
            outline: 2pt solid #008768;
            outline-offset: 1pt;
        }

        /* Goal viewer */
        .goal-viewer {
            background: white;
            border: 1pt solid #d0d0d0;
            position: relative;
            min-height: 400px;
        }

        .goal-viewer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3pt;
            background: #008768;
        }

        .goal-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18pt 24pt;
            background: #f6f6f6;
            border-bottom: 1pt solid #d0d0d0;
        }

        .nav-btn {
            padding: 9pt 15pt;
            background: #008768;
            color: white;
            border: none;
            font-size: 12pt;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 6pt;
        }

        .nav-btn:hover {
            background: #00353e;
        }

        .nav-btn:disabled {
            background: #d0d0d0;
            color: #646363;
            cursor: not-allowed;
        }

        .goal-counter {
            font-size: 12pt;
            line-height: 15pt;
            font-weight: bold;
            color: #00353e;
        }

        .goal-content {
            padding: 24pt;
        }

        .goal-title {
            font-size: 18pt;
            line-height: 21pt;
            font-weight: bold;
            color: #000000;
            margin-bottom: 12pt;
        }

        .goal-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 6pt;
            margin-bottom: 18pt;
        }

        .meta-tag {
            padding: 3pt 9pt;
            font-size: 7pt;
            line-height: 9pt;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5pt;
        }

        .meta-tag.job-level {
            background: rgba(0, 135, 104, 0.1);
            color: #008768;
            border: 1pt solid #008768;
        }

        .meta-tag.category {
            background: rgba(174, 204, 83, 0.1);
            color: #5a7a1a;
            border: 1pt solid #aecc53;
        }

        .meta-tag.type {
            background: rgba(0, 53, 62, 0.1);
            color: #00353e;
            border: 1pt solid #00353e;
        }

        .goal-bullets {
            list-style: none;
            padding: 0;
            margin: 0 0 24pt 0;
        }

        .goal-bullets li {
            font-size: 9pt;
            line-height: 12pt;
            color: #000000;
            margin-bottom: 9pt;
            padding-left: 15pt;
            position: relative;
        }

        .goal-bullets li::before {
            content: '—';
            position: absolute;
            left: 0;
            color: #008768;
            font-weight: bold;
        }



        .copy-btn {
            padding: 9pt 18pt;
            background: #e52713;
            color: white;
            border: none;
            font-size: 9pt;
            line-height: 12pt;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: none;
            letter-spacing: normal;
            float: right;
        }

        .copy-btn:hover {
            background: #00353e;
        }

        .copy-btn:active {
            background: #aecc53;
            color: #000000;
        }

        .no-goals {
            text-align: center;
            padding: 72pt;
            color: #646363;
        }

        .no-goals h3 {
            font-size: 18pt;
            line-height: 21pt;
            font-weight: bold;
            margin-bottom: 12pt;
            color: #000000;
        }

        /* Resources section */
        .resources-section {
            background: #f6f6f6;
            padding: 24pt;
            margin-top: 36pt;
            border-left: 3pt solid #aecc53;
        }

        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250pt, 1fr));
            gap: 18pt;
            margin-top: 18pt;
        }

        .resource-card {
            background: white;
            padding: 18pt;
            border: 1pt solid #d0d0d0;
        }

        .resource-card h4 {
            font-size: 12pt;
            line-height: 15pt;
            font-weight: bold;
            color: #008768;
            margin-bottom: 6pt;
        }

        .resource-card p {
            font-size: 9pt;
            line-height: 12pt;
            color: #000000;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 12pt;
            }
            
            .modal {
                padding: 24pt;
                margin: 12pt;
            }
            
            .filters-row {
                grid-template-columns: 1fr;
                gap: 18pt;
            }
            
            .filter-group {
                margin-bottom: 18pt;
            }
            
            .filters {
                padding: 18pt;
            }
            
            .goal-content {
                padding: 18pt;
            }
            
            .goal-navigation {
                padding: 12pt 18pt;
            }
            
            .nav-btn {
                padding: 6pt 12pt;
                font-size: 10pt;
            }
            
            .resources-section {
                padding: 18pt;
            }
            
            .resources-grid {
                grid-template-columns: 1fr;
                gap: 12pt;
            }
        }
    </style>
</head>
<body>
    <!-- Welcome Modal -->
    <div id="welcomeModal" class="modal-overlay">
        <div class="modal">
            <h2>UK&I Structural Sustainability Goals</h2>
            <p>Welcome! This tool helps you explore sustainability goals aligned with UK Structural Engineers Declare commitments. To get started, please select your current job role to see the most relevant goals for your level.</p>
            
            <label for="modalRoleSelect" class="filter-label">What is your job role?</label>
            <select id="modalRoleSelect" class="modal-dropdown">
                <option value="">Please select your role...</option>
                <option value="graduate_engineer">Graduate Engineer</option>
                <option value="engineer">Engineer</option>
                <option value="senior_engineer">Senior Engineer</option>
                <option value="principal_engineer">Principal Engineer</option>
                <option value="associate_director">Associate Director</option>
                <option value="regional_director">Regional Director</option>
                <option value="director">Director</option>
                <option value="technician">Technician</option>
                <option value="all">Show me all roles</option>
            </select>
            
            <button id="startBtn" class="modal-btn" disabled>Start exploring goals</button>
        </div>
    </div>

    <!-- Main Content -->
    <div id="mainContent" class="container hidden">
        <div class="filters">
            <div class="filters-row">
                <div class="filter-group">
                    <label class="filter-label">Goal Type</label>
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-filter="type" data-value="all">All Goals</button>
                        <button class="filter-btn" data-filter="type" data-value="simple">Simple Goals</button>
                        <button class="filter-btn" data-filter="type" data-value="detailed">Detailed Goals</button>
                    </div>
                </div>

                <div class="filter-group">
                    <label class="filter-label" for="roleSelect">Job Role</label>
                    <select id="roleSelect" class="role-dropdown">
                        <option value="all">All Roles</option>
                        <option value="graduate_engineer">Graduate Engineer</option>
                        <option value="engineer">Engineer</option>
                        <option value="senior_engineer">Senior Engineer</option>
                        <option value="principal_engineer">Principal Engineer</option>
                        <option value="associate_director">Associate Director</option>
                        <option value="regional_director">Regional Director</option>
                        <option value="director">Director</option>
                        <option value="technician">Technician</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="goal-viewer">
            <div class="goal-navigation">
                <button id="prevBtn" class="nav-btn">
                    ← Previous
                </button>
                <div class="goal-counter">
                    <span id="currentGoal">1</span> of <span id="totalGoals">0</span>
                </div>
                <button id="nextBtn" class="nav-btn">
                    Next →
                </button>
            </div>

            <div id="goalContent" class="goal-content">
                <!-- Goal content will be populated by JavaScript -->
            </div>
        </div>

        <div class="resources-section">
            <h2 class="heading-05">Available Resources</h2>
            <div class="resources-grid">
                <div class="resource-card">
                    <h4>Structural Sustainability SharePoint</h4>
                    <p>Comprehensive knowledge hub with ScopeX decarbonisation guidance, Eco.Zero tools, project templates, CPD opportunities, and monthly newsletters.</p>
                </div>
                <div class="resource-card">
                    <h4>Eco.Zero™ Tool Suite</h4>
                    <p>Optioneering Tool for early project stages (RIBA 0/1) and Measure Tool for automated carbon tracking from Revit models.</p>
                </div>
                <div class="resource-card">
                    <h4>Structural Sustainability Team</h4>
                    <p>Direct consultation with Jack Brunton, Ioana Price, and Megan Newson for expert guidance across all project stages.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Goals data - updated structure without description field
        const goalsData = [
            {
                "id": 1,
                "type": "simple",
                "role": "all",
                "category": "Clients & Growth",
                "title": "UK Structural Engineers Declare (UK SED)",
                "bullets": [
                    "Uphold signatory commitments by actively promoting climate emergency awareness and sustainable design principles",
                    "Engage with the Structural Sustainability Team (Jack Brunton, Ioana Price, and Megan Newson) for guidance on implementing UK SED principles in client interactions and project delivery",
                    "Embed sustainability thinking as a core consideration in all engineering decisions and recommendations"
                ]
            }
            // Additional goals would be loaded here from the JSON file
        ];

        // Application state
        let currentGoalIndex = 0;
        let filteredGoals = [];
        let filters = {
            type: 'all',
            role: 'all'
        };

        // DOM elements
        const welcomeModal = document.getElementById('welcomeModal');
        const mainContent = document.getElementById('mainContent');
        const modalRoleSelect = document.getElementById('modalRoleSelect');
        const startBtn = document.getElementById('startBtn');
        const roleSelect = document.getElementById('roleSelect');
        const goalContent = document.getElementById('goalContent');
        const currentGoalSpan = document.getElementById('currentGoal');
        const totalGoalsSpan = document.getElementById('totalGoals');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');

        // Initialize the application
        function init() {
            loadGoalsData();
            setupEventListeners();
            filterGoals();
        }

        // Load goals data (in a real app, this would be an AJAX call)
        async function loadGoalsData() {
            try {
                // In a real implementation, load from goals-data.json
                // For now, using embedded data
                filteredGoals = goalsData;
            } catch (error) {
                console.error('Failed to load goals data:', error);
            }
        }

        // Set up event listeners
        function setupEventListeners() {
            // Modal interactions
            modalRoleSelect.addEventListener('change', function() {
                startBtn.disabled = !this.value;
            });

            startBtn.addEventListener('click', function() {
                const selectedRole = modalRoleSelect.value;
                filters.role = selectedRole;
                
                // Update main role selector
                roleSelect.value = selectedRole;
                
                // Hide modal and show main content
                welcomeModal.classList.add('hidden');
                mainContent.classList.remove('hidden');
                
                // Filter and display goals
                filterGoals();
                displayCurrentGoal();
            });

            // Filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const filterType = this.dataset.filter;
                    const filterValue = this.dataset.value;
                    
                    // Update active state
                    document.querySelectorAll(`[data-filter="${filterType}"]`).forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Update filter
                    filters[filterType] = filterValue;
                    filterGoals();
                    displayCurrentGoal();
                });
            });

            // Role selector
            roleSelect.addEventListener('change', function() {
                filters.role = this.value;
                filterGoals();
                displayCurrentGoal();
            });

            // Navigation buttons
            prevBtn.addEventListener('click', () => {
                if (currentGoalIndex > 0) {
                    currentGoalIndex--;
                    displayCurrentGoal();
                }
            });

            nextBtn.addEventListener('click', () => {
                if (currentGoalIndex < filteredGoals.length - 1) {
                    currentGoalIndex++;
                    displayCurrentGoal();
                }
            });
        }

        // Filter goals based on current filters
        function filterGoals() {
            filteredGoals = goalsData.filter(goal => {
                // Type filter
                if (filters.type !== 'all' && goal.type !== filters.type) {
                    return false;
                }
                
                // Role filter
                if (filters.role !== 'all' && goal.role !== 'all' && goal.role !== filters.role) {
                    return false;
                }
                
                return true;
            });

            // Reset current goal index if it's out of bounds
            if (currentGoalIndex >= filteredGoals.length) {
                currentGoalIndex = 0;
            }

            // Update total goals counter
            totalGoalsSpan.textContent = filteredGoals.length;
        }

        // Display the current goal
        function displayCurrentGoal() {
            if (filteredGoals.length === 0) {
                goalContent.innerHTML = `
                    <div class="no-goals">
                        <h3>No goals match your current filters</h3>
                        <p>Try adjusting your filter settings to see more goals.</p>
                    </div>
                `;
                currentGoalSpan.textContent = '0';
                prevBtn.disabled = true;
                nextBtn.disabled = true;
                return;
            }

            const goal = filteredGoals[currentGoalIndex];
            const roleDisplayName = getRoleDisplayName(goal.role);

            // Create bullets HTML - all bullets formatted the same
            const bulletsHtml = goal.bullets.map((bullet, index) => {
                return `<li>${bullet}</li>`;
            }).join('');

            goalContent.innerHTML = `
                <h2 class="goal-title">${goal.title}</h2>
                <div class="goal-meta">
                    <span class="meta-tag job-level">${roleDisplayName}</span>
                    <span class="meta-tag category">${goal.category}</span>
                    <span class="meta-tag type">${goal.type} goal</span>
                </div>
                <ul class="goal-bullets">
                    ${bulletsHtml}
                </ul>
                <button class="copy-btn" onclick="copyGoalText()">Copy Goal Text</button>
                <div style="clear: both;"></div>
            `;

            // Update navigation
            currentGoalSpan.textContent = currentGoalIndex + 1;
            prevBtn.disabled = currentGoalIndex === 0;
            nextBtn.disabled = currentGoalIndex === filteredGoals.length - 1;
        }

        // Get display name for role
        function getRoleDisplayName(role) {
            const roleNames = {
                'all': 'All Roles',
                'graduate_engineer': 'Graduate Engineer',
                'engineer': 'Engineer', 
                'senior_engineer': 'Senior Engineer',
                'principal_engineer': 'Principal Engineer',
                'associate_director': 'Associate Director',
                'regional_director': 'Regional Director',
                'director': 'Director',
                'technician': 'Technician'
            };
            return roleNames[role] || role;
        }

        // Copy goal text to clipboard
        function copyGoalText() {
            const goal = filteredGoals[currentGoalIndex];
            const roleDisplayName = getRoleDisplayName(goal.role);
            
            let text = `${goal.title}\n`;
            text += `Role: ${roleDisplayName}\n`;
            text += `Category: ${goal.category}\n`;
            text += `Type: ${goal.type} goal\n\n`;
            
            goal.bullets.forEach((bullet, index) => {
                text += `${index === 0 ? 'Description:' : '•'} ${bullet}\n`;
            });

            navigator.clipboard.writeText(text).then(() => {
                // Visual feedback
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                btn.style.background = '#aecc53';
                btn.style.color = '#000000';
                
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '#e52713';
                    btn.style.color = 'white';
                }, 1500);
            });
        }

        // Start the application
        init();
    </script>
</body>
</html>
